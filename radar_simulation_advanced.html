<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é«˜çº§é›·è¾¾å¨åŠ›ä»¿çœŸæ¼”ç¤º - ä½œè€…: duudu</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }



        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1600px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header .author {
            font-size: 1.1em;
            opacity: 0.8;
            margin-bottom: 20px;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        .panel {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .radar-display {
            grid-row: span 2;
        }

        .radar-canvas {
            width: 100%;
            height: 400px;
            background: radial-gradient(circle at center, rgba(0,255,0,0.1) 0%, rgba(0,100,0,0.05) 50%, transparent 100%);
            border-radius: 50%;
            position: relative;
            margin: 20px 0;
            border: 2px solid rgba(0,255,0,0.3);
        }

        .radar-sweep {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 2px;
            height: 50%;
            background: linear-gradient(to top, rgba(0,255,0,0.8), transparent);
            transform-origin: bottom center;
            transform: translate(-50%, -100%) rotate(0deg);
            animation: sweep-circular 3s linear infinite;
        }

        @keyframes sweep-circular {
            from { transform: translate(-50%, -100%) rotate(0deg); }
            to { transform: translate(-50%, -100%) rotate(360deg); }
        }

        @keyframes sweep-sector {
            0% { transform: translate(-50%, -100%) rotate(-45deg); }
            50% { transform: translate(-50%, -100%) rotate(45deg); }
            100% { transform: translate(-50%, -100%) rotate(-45deg); }
        }

        @keyframes sweep-track {
            0% { transform: translate(-50%, -100%) rotate(0deg); }
            25% { transform: translate(-50%, -100%) rotate(10deg); }
            50% { transform: translate(-50%, -100%) rotate(0deg); }
            75% { transform: translate(-50%, -100%) rotate(-10deg); }
            100% { transform: translate(-50%, -100%) rotate(0deg); }
        }

        @keyframes sweep-search {
            0% { transform: translate(-50%, -100%) rotate(0deg); }
            20% { transform: translate(-50%, -100%) rotate(72deg); }
            40% { transform: translate(-50%, -100%) rotate(144deg); }
            60% { transform: translate(-50%, -100%) rotate(216deg); }
            80% { transform: translate(-50%, -100%) rotate(288deg); }
            100% { transform: translate(-50%, -100%) rotate(360deg); }
        }

        .range-rings {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .range-ring {
            position: absolute;
            border: 1px solid rgba(0,255,0,0.2);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .target {
            position: absolute;
            width: 8px;
            height: 8px;
            background: #ff4444;
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 0 0 10px #ff4444;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            50% { opacity: 0.5; transform: translate(-50%, -50%) scale(1.2); }
        }

        .parameter {
            margin-bottom: 15px;
        }

        .parameter label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 0.9em;
        }

        .parameter input[type="range"] {
            width: 100%;
            height: 4px;
            border-radius: 2px;
            background: rgba(255,255,255,0.2);
            outline: none;
            margin-bottom: 3px;
        }

        .parameter input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4CAF50;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(76,175,80,0.5);
        }

        .parameter select {
            width: 100%;
            padding: 8px;
            border-radius: 5px;
            border: 1px solid rgba(255,255,255,0.3);
            background: rgba(0,0,0,0.3);
            color: white;
            font-size: 0.9em;
        }

        .parameter-value {
            text-align: right;
            font-size: 0.8em;
            opacity: 0.8;
        }

        .results {
            grid-column: 1 / -1;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            border-left: 3px solid #4CAF50;
            position: relative;
            cursor: help;
        }

        .result-item:hover {
            background: rgba(0,0,0,0.3);
            transform: translateY(-1px);
            transition: all 0.3s ease;
        }

        .tooltip {
            position: relative;
            cursor: help;
        }

        .tooltip::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.9);
            color: white;
            padding: 12px 16px;
            border-radius: 8px;
            font-size: 12px;
            line-height: 1.4;
            white-space: pre-line;
            max-width: 300px;
            width: max-content;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1000;
            border: 1px solid rgba(76,175,80,0.3);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        .tooltip::before {
            content: '';
            position: absolute;
            bottom: 115%;
            left: 50%;
            transform: translateX(-50%);
            border: 6px solid transparent;
            border-top-color: rgba(0,0,0,0.9);
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            z-index: 1001;
        }

        .tooltip:hover::after,
        .tooltip:hover::before {
            opacity: 1;
            visibility: visible;
        }

        .result-value {
            font-weight: bold;
            color: #4CAF50;
        }

        .formula {
            background: rgba(0,0,0,0.3);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            text-align: center;
            border-left: 4px solid #4CAF50;
            font-size: 0.9em;
        }

        .chart-container {
            grid-column: 1 / -1;
            margin-top: 20px;
        }

        .chart {
            width: 100%;
            height: 300px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }

        .waveform-display {
            height: 200px;
            background: rgba(0,0,0,0.3);
            border-radius: 10px;
            margin: 10px 0;
            position: relative;
            overflow: hidden;
        }

        .btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(76,175,80,0.3);
        }

        .btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(76,175,80,0.4);
        }

        .btn-reset {
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            box-shadow: 0 2px 10px rgba(255,107,107,0.3);
        }

        .btn-reset:hover {
            box-shadow: 0 4px 15px rgba(255,107,107,0.4);
        }

        .tab-container {
            margin-bottom: 20px;
        }

        .tab-buttons {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }

        .tab-btn {
            padding: 8px 16px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 20px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #4CAF50;
            box-shadow: 0 0 10px rgba(76,175,80,0.5);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .performance-indicator {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
        }

        .indicator-bar {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }

        .indicator-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffaa00, #4CAF50);
            transition: width 0.3s ease;
        }

        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2em;
            }
        }
        
        .parameter-readonly {
            padding: 10px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .compression-ratio-display {
            text-align: center;
        }
        
        .compression-ratio-display .result-value {
            font-size: 1.2em;
            font-weight: bold;
            color: #FFD700;
            display: block;
            margin-bottom: 5px;
        }
        
        .formula-hint {
            color: rgba(255,255,255,0.7);
            font-size: 0.8em;
            font-style: italic;
        }
        
        .performance-summary {
            background: linear-gradient(135deg, rgba(76,175,80,0.1), rgba(33,150,243,0.1));
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .performance-score {
            display: flex;
            align-items: center;
            gap: 30px;
        }
        

        

        
        .score-details {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .score-item {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .score-category {
            min-width: 80px;
            font-weight: bold;
            color: rgba(255,255,255,0.9);
        }
        
        .score-bar {
            flex: 1;
            height: 8px;
            background: rgba(255,255,255,0.2);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .score-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff4444, #ffaa00, #4CAF50);
            border-radius: 4px;
            transition: width 0.5s ease;
        }
        
        .score-text {
            min-width: 50px;
            font-weight: bold;
            text-align: center;
        }
        
        /* è®¡ç®—è¯¦æƒ…æ ·å¼ */
        .calculation-details {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .calculation-section {
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        
        .calculation-section h4 {
            margin: 0 0 15px 0;
            color: #4CAF50;
            font-size: 1.1em;
            border-bottom: 1px solid rgba(76,175,80,0.3);
            padding-bottom: 5px;
        }
        
        .calculation-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 10px;
        }
        
        .calc-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(255,255,255,0.03);
            border-radius: 4px;
            border-left: 3px solid rgba(76,175,80,0.5);
        }
        
        .calc-item.calc-total {
            background: rgba(76,175,80,0.1);
            border-left-color: #4CAF50;
            font-weight: bold;
        }
        
        .calc-item.calc-final {
            background: rgba(255,193,7,0.1);
            border-left-color: #FFC107;
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .calc-label {
            color: rgba(255,255,255,0.9);
            font-size: 0.9em;
        }
        
        .calc-value {
            color: #4CAF50;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            text-align: right;
        }
        
        .calc-total .calc-value {
            color: #66BB6A;
        }
        
        .calc-final .calc-value {
            color: #FFC107;
        }
        
        @media (max-width: 768px) {
            .performance-score {
                flex-direction: column;
                gap: 20px;
            }
            
            .score-circle {
                width: 100px;
                height: 100px;
            }
            
            .score-circle::before {
                 width: 75px;
                 height: 75px;
             }
         }
         
         .blind-zone-grid {
             display: grid;
             grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
             gap: 10px;
             margin-top: 15px;
         }
         
         .blind-zone-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: rgba(0,0,0,0.2);
            border-radius: 8px;
            border-left: 3px solid #ff6b6b;
            position: relative;
        }

        .blind-zone-item:hover {
            background: rgba(0,0,0,0.3);
            transform: translateY(-1px);
            transition: all 0.3s ease;
        }

        .blind-zone-item.tooltip {
            cursor: help;
        }
         
         .blind-zone-value {
             font-weight: bold;
             color: #ff6b6b;
         }
         
         .results h4 {
             color: #ff6b6b;
             margin: 20px 0 10px 0;
             font-size: 1.1em;
             display: flex;
             align-items: center;
             gap: 8px;
         }
         
         /* Tooltipæ ·å¼ */
         .tooltip {
             position: relative;
             cursor: help;
         }
         
         .tooltip::after {
             content: attr(data-tooltip);
             position: absolute;
             bottom: 125%;
             left: 50%;
             transform: translateX(-50%);
             background: rgba(0, 0, 0, 0.9);
             color: white;
             padding: 8px 12px;
             border-radius: 6px;
             font-size: 0.85em;
             white-space: nowrap;
             opacity: 0;
             visibility: hidden;
             transition: opacity 0.3s, visibility 0.3s;
             z-index: 1000;
             pointer-events: none;
         }
         
         .tooltip::before {
             content: '';
             position: absolute;
             bottom: 115%;
             left: 50%;
             transform: translateX(-50%);
             border: 5px solid transparent;
             border-top-color: rgba(0, 0, 0, 0.9);
             opacity: 0;
             visibility: hidden;
             transition: opacity 0.3s, visibility 0.3s;
         }
         
         .tooltip:hover::after,
         .tooltip:hover::before {
             opacity: 1;
             visibility: visible;
         }
         
         /* å‚æ•°è¾“å…¥æ¡†æ ·å¼ */
         .parameter-input-group {
             display: flex;
             align-items: center;
             gap: 10px;
             margin-top: 5px;
         }
         
         .parameter-manual-input {
             width: 80px;
             padding: 4px 8px;
             border: 1px solid rgba(255,255,255,0.3);
             border-radius: 4px;
             background: rgba(255,255,255,0.1);
             color: white;
             font-size: 0.9em;
             text-align: center;
         }
         
         .parameter-manual-input:focus {
             outline: none;
             border-color: #4CAF50;
             background: rgba(255,255,255,0.15);
         }
         
         .parameter-apply-btn {
             padding: 4px 8px;
             background: #4CAF50;
             color: white;
             border: none;
             border-radius: 4px;
             cursor: pointer;
             font-size: 0.8em;
             transition: background 0.3s;
         }
         
         .parameter-apply-btn:hover {
             background: #45a049;
         }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¯ é«˜çº§é›·è¾¾å¨åŠ›ä»¿çœŸæ¼”ç¤º</h1>
            <div class="author">ä½œè€…: duudu</div>
            <div class="formula">
                R<sub>max</sub> = â´âˆš[(P<sub>t</sub> Ã— G<sub>t</sub> Ã— G<sub>r</sub> Ã— Î»Â² Ã— Ïƒ Ã— G<sub>pc</sub> Ã— G<sub>ci</sub> Ã— G<sub>nci</sub> Ã— Ï„) / (k Ã— T Ã— F Ã— L Ã— SNR Ã— (4Ï€)Â³ Ã— L<sub>cfar</sub>)]
            </div>
        </div>

        <div class="main-content">
            <div class="panel radar-display">
                <h3>ğŸ¯ é›·è¾¾æ˜¾ç¤ºå™¨</h3>
                <div class="radar-canvas" id="radarCanvas">
                    <div class="radar-sweep"></div>
                    <div class="range-rings" id="rangeRings"></div>
                    <div class="target" id="target"></div>
                </div>
                <div style="text-align: center; margin-top: 10px;">
                    <span>æœ€å¤§æ¢æµ‹è·ç¦»: <span id="maxRangeDisplay" style="color: #4CAF50; font-weight: bold;">0 km</span></span>
                </div>
                
                <div class="performance-indicator">
                    <span>ç³»ç»Ÿæ€§èƒ½:</span>
                    <div class="indicator-bar">
                        <div class="indicator-fill" id="performanceBar" style="width: 0%"></div>
                    </div>
                    <span id="performanceText">0%</span>
                </div>

                <div class="waveform-display" id="waveformDisplay">
                    <canvas id="waveformCanvas" width="300" height="180"></canvas>
                </div>
            </div>

            <div class="panel">
                <h3>ğŸ“Š é›·è¾¾æ–¹ç¨‹è®¡ç®—è¯¦æƒ…</h3>
                <div class="calculation-details">
                    <div class="calculation-section">
                        <h4>åˆ†å­éƒ¨åˆ† (Numerator)</h4>
                        <div class="calculation-grid">
                            <div class="calc-item">
                                <span class="calc-label">å‘å°„åŠŸç‡ P<sub>t</sub>:</span>
                                <span class="calc-value" id="ptCalc">0 W (0 dB)</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">å‘å°„å¢ç›Š G<sub>t</sub>:</span>
                                <span class="calc-value" id="gtCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">æ¥æ”¶å¢ç›Š G<sub>r</sub>:</span>
                                <span class="calc-value" id="grCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">æ³¢é•¿Â² Î»Â²:</span>
                                <span class="calc-value" id="lambdaCalc">0 mÂ² (0 dB)</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">ç›®æ ‡RCS Ïƒ:</span>
                                <span class="calc-value" id="sigmaCalc">0 mÂ² (0 dB)</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">è„‰å†²å®½åº¦ Ï„:</span>
                                <span class="calc-value" id="tauCalc">0 Î¼s (0 dB)</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">è„‰å†²å‹ç¼©å¢ç›Š:</span>
                                <span class="calc-value" id="pcGainCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">ç›¸å¹²ç§¯ç´¯å¢ç›Š:</span>
                                <span class="calc-value" id="ciGainCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">éç›¸å¹²ç§¯ç´¯å¢ç›Š:</span>
                                <span class="calc-value" id="nciGainCalc">0 dB</span>
                            </div>
                            <div class="calc-item calc-total">
                                <span class="calc-label">åˆ†å­æ€»å’Œ:</span>
                                <span class="calc-value" id="numeratorTotal">0 dB</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calculation-section">
                        <h4>åˆ†æ¯éƒ¨åˆ† (Denominator)</h4>
                        <div class="calculation-grid">
                            <div class="calc-item">
                                <span class="calc-label">ç»å°”å…¹æ›¼å¸¸æ•° k:</span>
                                <span class="calc-value" id="kCalc">1.38Ã—10â»Â²Â³ J/K (0 dB)</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">å™ªå£°æ¸©åº¦ T:</span>
                                <span class="calc-value" id="tCalc">290 K (0 dB)</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">å™ªå£°ç³»æ•° F:</span>
                                <span class="calc-value" id="fCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">ç³»ç»ŸæŸè€— L:</span>
                                <span class="calc-value" id="lCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">ä¿¡å™ªæ¯”è¦æ±‚ SNR:</span>
                                <span class="calc-value" id="snrCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">å‡ ä½•å› å­ (4Ï€)Â³:</span>
                                <span class="calc-value" id="geometryCalc">248.7 (0 dB)</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">CFARæŸå¤±:</span>
                                <span class="calc-value" id="cfarCalc">0 dB</span>
                            </div>
                            <div class="calc-item calc-total">
                                <span class="calc-label">åˆ†æ¯æ€»å’Œ:</span>
                                <span class="calc-value" id="denominatorTotal">0 dB</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="calculation-section">
                        <h4>æœ€ç»ˆè®¡ç®—</h4>
                        <div class="calculation-grid">
                            <div class="calc-item">
                                <span class="calc-label">Râ´ (dB):</span>
                                <span class="calc-value" id="r4dbCalc">0 dB</span>
                            </div>
                            <div class="calc-item">
                                <span class="calc-label">Râ´ (çº¿æ€§):</span>
                                <span class="calc-value" id="r4linearCalc">0</span>
                            </div>
                            <div class="calc-item calc-final">
                                <span class="calc-label">æœ€å¤§æ¢æµ‹è·ç¦» R:</span>
                                <span class="calc-value" id="finalRangeCalc">0 km</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="switchTab('basic')">åŸºæœ¬å‚æ•°</button>
                        <button class="tab-btn" onclick="switchTab('signal')">ä¿¡å·å¤„ç†</button>
                    </div>
                    
                    <div class="tab-content active" id="basic-tab">
                        <div class="parameter">
                            <label for="pt" class="tooltip" data-tooltip="é›·è¾¾å‘å°„æœºçš„å³°å€¼åŠŸç‡ï¼Œç›´æ¥å½±å“æ¢æµ‹è·ç¦»ã€‚å…¸å‹å€¼ï¼š100W-2kW">å‘å°„åŠŸç‡ P<sub>t</sub> (W)</label>
                            <input type="range" id="pt" min="100" max="2000" value="480" step="10">
                            <div class="parameter-value" id="ptValue">480 W</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="ptInput" min="100" max="2000" step="10" placeholder="480">
                                <button class="parameter-apply-btn" onclick="applyManualInput('pt')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="gt" class="tooltip" data-tooltip="å‘å°„å¤©çº¿çš„åŠŸç‡å¢ç›Šï¼Œå†³å®šèƒ½é‡é›†ä¸­ç¨‹åº¦ã€‚é«˜å¢ç›Šå¤©çº¿æ¢æµ‹è·ç¦»æ›´è¿œ">å‘å°„å¤©çº¿å¢ç›Š G<sub>t</sub> (dB)</label>
                            <input type="range" id="gt" min="15" max="40" value="25.6" step="0.1">
                            <div class="parameter-value" id="gtValue">25.6 dB</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="gtInput" min="15" max="40" step="0.1" placeholder="25.6">
                                <button class="parameter-apply-btn" onclick="applyManualInput('gt')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="gr" class="tooltip" data-tooltip="æ¥æ”¶å¤©çº¿çš„åŠŸç‡å¢ç›Šï¼Œå½±å“æ¥æ”¶ä¿¡å·å¼ºåº¦ã€‚é€šå¸¸ä¸å‘å°„å¤©çº¿ç›¸åŒæˆ–æ›´é«˜">æ¥æ”¶å¤©çº¿å¢ç›Š G<sub>r</sub> (dB)</label>
                            <input type="range" id="gr" min="20" max="45" value="34" step="0.1">
                            <div class="parameter-value" id="grValue">34 dB</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="grInput" min="20" max="45" step="0.1" placeholder="34">
                                <button class="parameter-apply-btn" onclick="applyManualInput('gr')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="sigma" class="tooltip" data-tooltip="ç›®æ ‡é›·è¾¾æˆªé¢ç§¯ï¼Œè¡¨ç¤ºç›®æ ‡åå°„é›·è¾¾æ³¢çš„èƒ½åŠ›ã€‚æˆ˜æ–—æœºçº¦1-10mÂ²ï¼Œéšèº«ç›®æ ‡<0.1mÂ²">ç›®æ ‡RCS Ïƒ (mÂ²)</label>
                            <input type="range" id="sigma" min="0.001" max="2" value="0.01" step="0.001">
                            <div class="parameter-value" id="sigmaValue">0.01 mÂ²</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="sigmaInput" min="0.001" max="2" step="0.001" placeholder="0.01">
                                <button class="parameter-apply-btn" onclick="applyManualInput('sigma')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="snr" class="tooltip" data-tooltip="æ£€æµ‹ç›®æ ‡æ‰€éœ€çš„æœ€å°ä¿¡å™ªæ¯”ã€‚å€¼è¶Šå°æ£€æµ‹èƒ½åŠ›è¶Šå¼ºï¼Œä½†è™šè­¦ç‡å¢åŠ ">ä¿¡å™ªæ¯”è¦æ±‚ SNR (dB)</label>
                            <input type="range" id="snr" min="5" max="25" value="12.8" step="0.1">
                            <div class="parameter-value" id="snrValue">12.8 dB</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="snrInput" min="5" max="25" step="0.1" placeholder="12.8">
                                <button class="parameter-apply-btn" onclick="applyManualInput('snr')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="freq" class="tooltip" data-tooltip="é›·è¾¾å·¥ä½œé¢‘ç‡ã€‚ä½é¢‘ç©¿é€åŠ›å¼ºä½†åˆ†è¾¨ç‡ä½ï¼Œé«˜é¢‘åˆ†è¾¨ç‡é«˜ä½†æ˜“å—å¤©æ°”å½±å“">å·¥ä½œé¢‘ç‡ (GHz)</label>
                            <input type="range" id="freq" min="0.3" max="18" value="10" step="0.1">
                            <div class="parameter-value" id="freqValue">10 GHz</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="freqInput" min="0.3" max="18" step="0.1" placeholder="10">
                                <button class="parameter-apply-btn" onclick="applyManualInput('freq')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="noiseFigure" class="tooltip" data-tooltip="ç³»ç»Ÿå™ªå£°ç³»æ•°ï¼Œè¡¨ç¤ºæ¥æ”¶æœºå¼•å…¥çš„å™ªå£°ã€‚å…¸å‹å€¼ï¼š1-10dBï¼Œå€¼è¶Šå°ç³»ç»Ÿæ€§èƒ½è¶Šå¥½">å™ªå£°ç³»æ•° F (dB)</label>
                            <input type="range" id="noiseFigure" min="1" max="15" value="4" step="0.1">
                            <div class="parameter-value" id="noiseFigureValue">4 dB</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="noiseFigureInput" min="1" max="15" step="0.1" placeholder="4">
                                <button class="parameter-apply-btn" onclick="applyManualInput('noiseFigure')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="systemLoss" class="tooltip" data-tooltip="ç³»ç»Ÿé“¾è·¯æŸè€—ï¼ŒåŒ…æ‹¬é¦ˆçº¿æŸè€—ã€å¼€å…³æŸè€—ã€å¤§æ°”æŸè€—ç­‰ã€‚å…¸å‹å€¼ï¼š3-15dB">ç³»ç»ŸæŸè€— L (dB)</label>
                            <input type="range" id="systemLoss" min="3" max="20" value="8.24" step="0.1">
                            <div class="parameter-value" id="systemLossValue">8.24 dB</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="systemLossInput" min="3" max="20" step="0.1" placeholder="8.24">
                                <button class="parameter-apply-btn" onclick="applyManualInput('systemLoss')">åº”ç”¨</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="signal-tab">
                        <div class="parameter">
                            <label for="pulseCompression" class="tooltip" data-tooltip="è„‰å†²å‹ç¼©æ¯”=è„‰å®½Ã—å¸¦å®½ï¼Œæé«˜è·ç¦»åˆ†è¾¨ç‡å’Œä¿¡å™ªæ¯”ã€‚å…¸å‹å€¼ï¼š10-10000">è„‰å†²å‹ç¼©æ¯” (è‡ªåŠ¨è®¡ç®—)</label>
                            <div class="parameter-readonly">
                                <div class="compression-ratio-display">
                                    <span class="result-value" id="pulseCompressionValue">100</span>
                                    <small class="formula-hint">(Ï„ Ã— B = è„‰å†²å®½åº¦ Ã— å¸¦å®½)</small>
                                </div>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="coherentIntegration" class="tooltip" data-tooltip="ç›¸å¹²ç§¯ç´¯è„‰å†²æ•°ï¼Œæé«˜ä¿¡å™ªæ¯”ã€‚å¢ç›Š=10Ã—logâ‚â‚€(N) dBï¼Œå—PRFå’Œé©»ç•™æ—¶é—´é™åˆ¶">ç›¸å¹²ç§¯ç´¯è„‰å†²æ•°</label>
                            <input type="range" id="coherentIntegration" min="1" max="256" value="192" step="1">
                            <div class="parameter-value" id="coherentIntegrationValue">192</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="coherentIntegrationInput" min="1" max="256" step="1" placeholder="192">
                                <button class="parameter-apply-btn" onclick="applyManualInput('coherentIntegration')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="nonCoherentIntegration" class="tooltip" data-tooltip="éç›¸å¹²ç§¯ç´¯æ¬¡æ•°ï¼Œè¿›ä¸€æ­¥æé«˜ä¿¡å™ªæ¯”ã€‚å¢ç›Š=5Ã—logâ‚â‚€(M) dBï¼Œä½†ä¼šå¢åŠ å¤„ç†æ—¶é—´">éç›¸å¹²ç§¯ç´¯æ¬¡æ•°</label>
                            <input type="range" id="nonCoherentIntegration" min="0" max="64" value="0" step="1">
                            <div class="parameter-value" id="nonCoherentIntegrationValue">0</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="nonCoherentIntegrationInput" min="0" max="64" step="1" placeholder="0">
                                <button class="parameter-apply-btn" onclick="applyManualInput('nonCoherentIntegration')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="cfarType" class="tooltip" data-tooltip="æ’è™šè­¦ç‡æ£€æµ‹å™¨ç±»å‹ã€‚CA-CFARé€‚ç”¨å‡åŒ€æ‚æ³¢ï¼ŒGO/SO-CFARé€‚ç”¨å¤šç›®æ ‡ç¯å¢ƒ">CFARç±»å‹</label>
                            <select id="cfarType">
                                <option value="ca">CA-CFAR</option>
                                <option value="go">GO-CFAR</option>
                                <option value="so">SO-CFAR</option>
                                <option value="os">OS-CFAR</option>
                            </select>
                        </div>

                        <div class="parameter">
                            <label for="cfarLoss" class="tooltip" data-tooltip="CFARå¤„ç†å¼•å…¥çš„æ£€æµ‹æŸå¤±ï¼Œé€šå¸¸1-3dBã€‚æŸå¤±è¶Šå°æ£€æµ‹æ€§èƒ½è¶Šå¥½">CFARæŸå¤± (dB)</label>
                            <input type="range" id="cfarLoss" min="0" max="6" value="0" step="0.1">
                            <div class="parameter-value" id="cfarLossValue">0 dB</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="cfarLossInput" min="0" max="6" step="0.1" placeholder="0">
                                <button class="parameter-apply-btn" onclick="applyManualInput('cfarLoss')">åº”ç”¨</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="panel">
                <div class="tab-container">
                    <div class="tab-buttons">
                        <button class="tab-btn active" onclick="switchTab('waveform', this.parentElement)">æ³¢å½¢å‚æ•°</button>
                        <button class="tab-btn" onclick="switchTab('operation', this.parentElement)">å·¥ä½œæ¨¡å¼</button>
                    </div>
                    
                    <div class="tab-content active" id="waveform-tab">
                        <div class="parameter">
                            <label for="waveformType" class="tooltip" data-tooltip="é›·è¾¾æ³¢å½¢ç±»å‹ã€‚LFMæä¾›è„‰å†²å‹ç¼©ï¼Œç›¸ä½ç¼–ç æŠ—å¹²æ‰°æ€§å¼º">æ³¢å½¢ç±»å‹</label>
                            <select id="waveformType">
                                <option value="rect">çŸ©å½¢è„‰å†²</option>
                                <option value="lfm">çº¿æ€§è°ƒé¢‘(LFM)</option>
                                <option value="bpsk">äºŒç›¸ç¼–ç (BPSK)</option>
                                <option value="qpsk">å››ç›¸ç¼–ç (QPSK)</option>
                            </select>
                        </div>

                        <div class="parameter">
                            <label for="pulseWidth" class="tooltip" data-tooltip="è„‰å†²æŒç»­æ—¶é—´ï¼Œå½±å“å‘å°„èƒ½é‡å’Œæœ€å°æ¢æµ‹è·ç¦»ã€‚é•¿è„‰å†²èƒ½é‡å¤§ä½†ç›²åŒºå¤§">è„‰å†²å®½åº¦ (Î¼s)</label>
                            <input type="range" id="pulseWidth" min="0.1" max="1000" value="20" step="0.1">
                            <div class="parameter-value" id="pulseWidthValue">20 Î¼s</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="pulseWidthInput" min="0.1" max="1000" step="0.1" placeholder="20">
                                <button class="parameter-apply-btn" onclick="applyManualInput('pulseWidth')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="bandwidth" class="tooltip" data-tooltip="ä¿¡å·å¸¦å®½ï¼Œå†³å®šè·ç¦»åˆ†è¾¨ç‡ã€‚å¸¦å®½è¶Šå¤§åˆ†è¾¨ç‡è¶Šé«˜ï¼ŒÎ”R=c/(2B)">ä¿¡å·å¸¦å®½ (MHz)</label>
                            <input type="range" id="bandwidth" min="0.1" max="2000" value="0.1" step="0.1">
                            <div class="parameter-value" id="bandwidthValue">0.1 MHz</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="bandwidthInput" min="0.1" max="2000" step="0.1" placeholder="0.1">
                                <button class="parameter-apply-btn" onclick="applyManualInput('bandwidth')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="prf" class="tooltip" data-tooltip="è„‰å†²é‡å¤é¢‘ç‡ï¼Œå½±å“æœ€å¤§ä¸æ¨¡ç³Šè·ç¦»å’Œå¤šæ™®å‹’æ€§èƒ½ã€‚é«˜PRFè·ç¦»è¿‘ä½†å¤šæ™®å‹’å¥½">è„‰å†²é‡å¤é¢‘ç‡ (Hz)</label>
                            <input type="range" id="prf" min="50" max="50000" value="10000" step="10">
                            <div class="parameter-value" id="prfValue">10000 Hz</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="prfInput" min="50" max="50000" step="10" placeholder="10000">
                                <button class="parameter-apply-btn" onclick="applyManualInput('prf')">åº”ç”¨</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="operation-tab">
                        <div class="parameter">
                            <label for="scanMode" class="tooltip" data-tooltip="é›·è¾¾æ‰«æå·¥ä½œæ¨¡å¼ã€‚åœ†æ‰«ç”¨äºæœç´¢ï¼Œæ‰‡æ‰«ç”¨äºç›‘è§†ï¼Œè·Ÿè¸ªç”¨äºç›®æ ‡è·Ÿè¸ª">æ‰«ææ¨¡å¼</label>
                            <select id="scanMode">
                                <option value="circular">åœ†æ‰«</option>
                                <option value="sector">æ‰‡æ‰«</option>
                                <option value="track">è·Ÿè¸ª</option>
                                <option value="search">æœç´¢</option>
                            </select>
                        </div>

                        <div class="parameter">
                            <label for="dwellTime" class="tooltip" data-tooltip="æ³¢æŸåœ¨æŸæ–¹å‘çš„åœç•™æ—¶é—´ï¼Œå½±å“ç§¯ç´¯è„‰å†²æ•°å’Œæ£€æµ‹æ€§èƒ½ã€‚æ—¶é—´è¶Šé•¿æ£€æµ‹è¶Šå¥½">é©»ç•™æ—¶é—´ (ms)</label>
                            <input type="range" id="dwellTime" min="0.1" max="10000" value="100" step="0.1">
                            <div class="parameter-value" id="dwellTimeValue">100 ms</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="dwellTimeInput" min="0.1" max="10000" step="0.1" placeholder="100">
                                <button class="parameter-apply-btn" onclick="applyManualInput('dwellTime')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="beamWidth" class="tooltip" data-tooltip="å¤©çº¿æ³¢æŸå®½åº¦ï¼Œå½±å“è§’åˆ†è¾¨ç‡å’Œå¢ç›Šã€‚çª„æ³¢æŸå¢ç›Šé«˜ä½†æ‰«ææ…¢">æ³¢æŸå®½åº¦ (Â°)</label>
                            <input type="range" id="beamWidth" min="0.5" max="10" value="2" step="0.1">
                            <div class="parameter-value" id="beamWidthValue">2Â°</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="beamWidthInput" min="0.5" max="10" step="0.1" placeholder="2">
                                <button class="parameter-apply-btn" onclick="applyManualInput('beamWidth')">åº”ç”¨</button>
                            </div>
                        </div>

                        <div class="parameter">
                            <label for="scanRate" class="tooltip" data-tooltip="å¤©çº¿æ‰«æé€Ÿåº¦ï¼Œå½±å“æ•°æ®æ›´æ–°ç‡ã€‚å¿«æ‰«ææ›´æ–°å¿«ä½†é©»ç•™æ—¶é—´çŸ­">æ‰«æé€Ÿç‡ (Â°/s)</label>
                            <input type="range" id="scanRate" min="1" max="360" value="60" step="1">
                            <div class="parameter-value" id="scanRateValue">60 Â°/s</div>
                            <div class="parameter-input-group">
                                <input type="number" class="parameter-manual-input" id="scanRateInput" min="1" max="360" step="1" placeholder="60">
                                <button class="parameter-apply-btn" onclick="applyManualInput('scanRate')">åº”ç”¨</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <button class="btn btn-reset" onclick="resetParameters()">ğŸ”„ é‡ç½®å‚æ•°</button>
            </div>
        </div>

        <div class="panel results">
            <h3>ğŸ“Š æ€§èƒ½åˆ†æç»“æœ</h3>
            <div class="performance-summary" id="performanceSummary">
                <div class="performance-score">
                    <div class="score-details">
                        <div class="score-item">
                            <span class="score-category">æ¢æµ‹èƒ½åŠ›:</span>
                            <div class="score-bar">
                                <div class="score-fill" id="detectionScore" style="width: 80%"></div>
                            </div>
                            <span class="score-text" id="detectionText">è‰¯å¥½</span>
                        </div>
                        <div class="score-item">
                            <span class="score-category">åˆ†è¾¨æ€§èƒ½:</span>
                            <div class="score-bar">
                                <div class="score-fill" id="resolutionScore" style="width: 90%"></div>
                            </div>
                            <span class="score-text" id="resolutionText">ä¼˜ç§€</span>
                        </div>
                        <div class="score-item">
                            <span class="score-category">ç³»ç»Ÿæ•ˆç‡:</span>
                            <div class="score-bar">
                                <div class="score-fill" id="efficiencyScore" style="width: 75%"></div>
                            </div>
                            <span class="score-text" id="efficiencyText">è‰¯å¥½</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="result-grid">
                <div class="result-item tooltip" data-tooltip="é›·è¾¾èƒ½å¤Ÿæ¢æµ‹åˆ°ç›®æ ‡çš„æœ€å¤§è·ç¦»\nè®¡ç®—å…¬å¼: R = [(PtÃ—GtÃ—GrÃ—ÏƒÃ—Î»Â²Ã—G)/(4Ï€)Â³Ã—kÃ—TÃ—FÃ—LÃ—SNR]^(1/4)\nå…¶ä¸­Gä¸ºæ€»ä¿¡å·å¤„ç†å¢ç›Š">
                    <span>æœ€å¤§æ¢æµ‹è·ç¦»:</span>
                    <span class="result-value" id="maxRange">0 km</span>
                </div>
                <div class="result-item tooltip" data-tooltip="ç”µç£æ³¢åœ¨è‡ªç”±ç©ºé—´ä¸­çš„æ³¢é•¿\nè®¡ç®—å…¬å¼: Î» = c/f\nå…¶ä¸­cä¸ºå…‰é€Ÿ(3Ã—10â¸ m/s)ï¼Œfä¸ºå·¥ä½œé¢‘ç‡">
                    <span>æ³¢é•¿:</span>
                    <span class="result-value" id="wavelength">0 m</span>
                </div>
                <div class="result-item tooltip" data-tooltip="è„‰å†²å‹ç¼©æŠ€æœ¯å¸¦æ¥çš„ä¿¡å™ªæ¯”æ”¹å–„\nè®¡ç®—å…¬å¼: G_pc = 10Ã—logâ‚â‚€(BÃ—Ï„)\nå…¶ä¸­Bä¸ºä¿¡å·å¸¦å®½ï¼ŒÏ„ä¸ºè„‰å†²å®½åº¦\nçŸ©å½¢è„‰å†²æ—¶å¢ç›Šä¸º0 dB">
                    <span>è„‰å†²å‹ç¼©å¢ç›Š:</span>
                    <span class="result-value" id="pcGain">0 dB</span>
                </div>
                <div class="result-item tooltip" data-tooltip="ç›¸å¹²ç§¯ç´¯å¤„ç†å¸¦æ¥çš„ä¿¡å™ªæ¯”æ”¹å–„\nè®¡ç®—å…¬å¼: G_ci = 10Ã—logâ‚â‚€(N)\nå…¶ä¸­Nä¸ºå®é™…ç›¸å¹²ç§¯ç´¯è„‰å†²æ•°\nå—é©»ç•™æ—¶é—´ã€PRFå’Œå¤„ç†èƒ½åŠ›é™åˆ¶">
                    <span>ç›¸å¹²ç§¯ç´¯å¢ç›Š:</span>
                    <span class="result-value" id="ciGain">0 dB</span>
                </div>
                <div class="result-item tooltip" data-tooltip="éç›¸å¹²ç§¯ç´¯å¤„ç†å¸¦æ¥çš„ä¿¡å™ªæ¯”æ”¹å–„\nè®¡ç®—å…¬å¼: G_nci = 5Ã—logâ‚â‚€(M)\nå…¶ä¸­Mä¸ºéç›¸å¹²ç§¯ç´¯æ¬¡æ•°\næ”¹å–„æ•ˆæœæ¯”ç›¸å¹²ç§¯ç´¯å·®">
                    <span>éç›¸å¹²ç§¯ç´¯å¢ç›Š:</span>
                    <span class="result-value" id="nciGain">0 dB</span>
                </div>
                <div class="result-item tooltip" data-tooltip="æ‰€æœ‰ä¿¡å·å¤„ç†æŠ€æœ¯çš„æ€»å¢ç›Š\nè®¡ç®—å…¬å¼: G_total = G_pc + G_ci + G_nci\nç›´æ¥å½±å“é›·è¾¾çš„æ¢æµ‹è·ç¦»">
                    <span>æ€»ä¿¡å·å¤„ç†å¢ç›Š:</span>
                    <span class="result-value" id="totalGain">0 dB</span>
                </div>
                <div class="result-item tooltip" data-tooltip="åœ¨ç»™å®šä¿¡å™ªæ¯”ä¸‹æ£€æµ‹åˆ°ç›®æ ‡çš„æ¦‚ç‡\nåŸºäºSwerlingç›®æ ‡æ¨¡å‹è®¡ç®—\nä¸ä¿¡å™ªæ¯”ã€ç§¯ç´¯æ¬¡æ•°ç›¸å…³">
                    <span>æ£€æµ‹æ¦‚ç‡:</span>
                    <span class="result-value" id="detectionProb">0%</span>
                </div>
                <div class="result-item tooltip" data-tooltip="å°†å™ªå£°è¯¯åˆ¤ä¸ºç›®æ ‡çš„æ¦‚ç‡\nç”±CFARæ£€æµ‹ç®—æ³•æ§åˆ¶\nå…¸å‹å€¼ä¸º10â»â¶åˆ°10â»â´">
                    <span>è™šè­¦æ¦‚ç‡:</span>
                    <span class="result-value" id="falseAlarmProb">0</span>
                </div>
                <div class="result-item tooltip" data-tooltip="é›·è¾¾èƒ½å¤Ÿåˆ†è¾¨çš„æœ€å°è·ç¦»é—´éš”\nè®¡ç®—å…¬å¼: Î”R = c/(2Ã—B)\nå…¶ä¸­cä¸ºå…‰é€Ÿï¼ŒBä¸ºä¿¡å·å¸¦å®½">
                    <span>è·ç¦»åˆ†è¾¨ç‡:</span>
                    <span class="result-value" id="rangeResolution">0 m</span>
                </div>
                <div class="result-item tooltip" data-tooltip="ä¸äº§ç”Ÿè·ç¦»æ¨¡ç³Šçš„æœ€å¤§æ¢æµ‹è·ç¦»\nè®¡ç®—å…¬å¼: R_max = c/(2Ã—PRF)\nå…¶ä¸­PRFä¸ºè„‰å†²é‡å¤é¢‘ç‡">
                <span>æœ€å¤§ä¸æ¨¡ç³Šè·ç¦»:</span>
                <span class="result-value" id="maxUnambiguousRange">0 km</span>
            </div>
            <div class="result-item tooltip" data-tooltip="åœ¨é©»ç•™æ—¶é—´å†…å®é™…å¯ç”¨çš„è„‰å†²æ•°\nå—é©»ç•™æ—¶é—´ã€PRFå’Œå¤„ç†èƒ½åŠ›é™åˆ¶\nå½±å“ç›¸å¹²ç§¯ç´¯å¢ç›Šçš„è®¡ç®—">
                <span>å¯ç”¨ç§¯ç´¯è„‰å†²æ•°:</span>
                <span class="result-value" id="availablePulses">0</span>
            </div>
            <div class="result-item tooltip" data-tooltip="å®é™…ç§¯ç´¯è„‰å†²æ•°ä¸è®¾å®šå€¼çš„æ¯”ç‡\nè®¡ç®—å…¬å¼: Î· = N_actual/N_setÃ—100%\nåæ˜ ç³»ç»Ÿå‚æ•°è®¾ç½®çš„åˆç†æ€§">
                <span>PRFæ•ˆç‡:</span>
                <span class="result-value" id="prfEfficiency">100%</span>
            </div>
            <div class="result-item tooltip" data-tooltip="è·ç¦»çº¦æŸæ¡ä»¶çš„æ»¡è¶³æƒ…å†µ\næ£€æŸ¥: æœ€å¤§æ¢æµ‹è·ç¦» â‰¤ æœ€å¤§ä¸æ¨¡ç³Šè·ç¦»\nç¡®ä¿æµ‹è·ç»“æœçš„å”¯ä¸€æ€§">
                    <span>è·ç¦»çº¦æŸçŠ¶æ€:</span>
                    <span class="result-value" id="constraintStatus">âœ“ æ»¡è¶³</span>
                </div>
                <div class="result-item">
                    <span>ç†è®ºéªŒè¯:</span>
                    <span class="result-value" id="theoryValidation">âœ“ å…¬å¼æ­£ç¡®</span>
                </div>
            </div>
            
            <h4>ğŸš« é›·è¾¾æ¢æµ‹ç›²åŒºåˆ†æ</h4>
            <div class="blind-zone-grid">
                <div class="blind-zone-item tooltip" data-tooltip="é›·è¾¾æ— æ³•æ¢æµ‹åˆ°ç›®æ ‡çš„æœ€å°è·ç¦»\nè®¡ç®—å…¬å¼: R_min = cÃ—Ï„/2\nå…¶ä¸­cä¸ºå…‰é€Ÿï¼ŒÏ„ä¸ºè„‰å†²å®½åº¦\nä¸»è¦ç”±å‘å°„è„‰å†²å®½åº¦å†³å®š">
                    <span>æœ€å°æ¢æµ‹è·ç¦»:</span>
                    <span class="blind-zone-value" id="minDetectionRange">0.15 km</span>
                </div>
                <div class="blind-zone-item tooltip" data-tooltip="ç”±äºè·ç¦»æ¨¡ç³Šé€ æˆçš„æ¢æµ‹ç›²åŒº\nå½“æœ€å¤§æ¢æµ‹è·ç¦» > æœ€å¤§ä¸æ¨¡ç³Šè·ç¦»æ—¶å‡ºç°\nè®¡ç®—: R_max - R_unambiguous\néœ€è¦è°ƒæ•´PRFæ¥é¿å…">
                    <span>è·ç¦»æ¨¡ç³Šç›²åŒº:</span>
                    <span class="blind-zone-value" id="rangeAmbiguityBlind">æ— </span>
                </div>
                <div class="blind-zone-item tooltip" data-tooltip="ç¬¬ä¸€ä¸ªå¤šæ™®å‹’ç›²é€Ÿå€¼\nè®¡ç®—å…¬å¼: v_blind = Î»Ã—PRF/2\nå…¶ä¸­Î»ä¸ºæ³¢é•¿ï¼ŒPRFä¸ºè„‰å†²é‡å¤é¢‘ç‡\nç›®æ ‡é€Ÿåº¦ä¸ºæ­¤å€¼çš„æ•´æ•°å€æ—¶æ— æ³•æ£€æµ‹">
                    <span>ç¬¬ä¸€ç›²é€Ÿ:</span>
                    <span class="blind-zone-value" id="firstBlindSpeed">0 m/s</span>
                </div>
                <div class="blind-zone-item tooltip" data-tooltip="åœ¨æŒ‡å®šé€Ÿåº¦èŒƒå›´å†…çš„å¤šæ™®å‹’ç›²åŒºæ•°é‡\nè®¡ç®—èŒƒå›´: Â±100 m/s\nè®¡ç®—å…¬å¼: N = floor(2Ã—V_max/v_blind) + 1\nç›²åŒºæ•°é‡è¶Šå¤šï¼Œæ£€æµ‹ç›²åŒºè¶Šä¸¥é‡">
                    <span>å¤šæ™®å‹’ç›²åŒºæ•°:</span>
                    <span class="blind-zone-value" id="dopplerBlindZones">5</span>
                </div>
                <div class="blind-zone-item tooltip" data-tooltip="å¤©çº¿æ³¢æŸå®½åº¦é€ æˆçš„è§’åº¦ç›²åŒº\nè®¡ç®—å…¬å¼: Î¸_blind = Â±BeamWidth/2\næ³¢æŸå®½åº¦è¶Šçª„ï¼Œè§’åº¦åˆ†è¾¨ç‡è¶Šé«˜\nä½†æ‰«æè¦†ç›–æ—¶é—´è¶Šé•¿">
                    <span>è§’åº¦ç›²åŒº:</span>
                    <span class="blind-zone-value" id="angleBlindZone">Â±1.0Â°</span>
                </div>
                <div class="blind-zone-item tooltip" data-tooltip="å„ç§ç›²åŒºå æ€»æ¢æµ‹ç©ºé—´çš„æ¯”ä¾‹\nç»¼åˆè€ƒè™‘è·ç¦»ç›²åŒºã€è§’åº¦ç›²åŒºç­‰å› ç´ \nè®¡ç®—: (è·ç¦»ç›²åŒºç‡ + è§’åº¦ç›²åŒºç‡) Ã— 100%\nè¦†ç›–ç‡è¶Šä½ï¼Œé›·è¾¾æ€§èƒ½è¶Šå¥½">
                    <span>ç›²åŒºè¦†ç›–ç‡:</span>
                    <span class="blind-zone-value" id="blindZoneCoverage">5.2%</span>
                </div>
            </div>
        </div>


    </div>

    <script>
        // ä½œè€…: duudu
        // é«˜çº§é›·è¾¾å‚æ•°å’Œå¸¸æ•°
        const CONSTANTS = {
            C: 3e8,           // å…‰é€Ÿ
            K: 1.38e-23,      // ç»å°”å…¹æ›¼å¸¸æ•°
            T: 290,           // å™ªå£°æ¸©åº¦
            F: 4,             // å™ªå£°ç³»æ•° (dB)
            L: 8.24,          // ç³»ç»ŸæŸè€— (dB)
            MTD: 192          // MTDç§¯ç´¯å¢ç›Š
        };

        // è·å–DOMå…ƒç´ 
        const elements = {
            // åŸºæœ¬å‚æ•°
            pt: document.getElementById('pt'),
            gt: document.getElementById('gt'),
            gr: document.getElementById('gr'),
            sigma: document.getElementById('sigma'),
            snr: document.getElementById('snr'),
            freq: document.getElementById('freq'),
            noiseFigure: document.getElementById('noiseFigure'),
            systemLoss: document.getElementById('systemLoss'),
            
            // ä¿¡å·å¤„ç†å‚æ•°
            coherentIntegration: document.getElementById('coherentIntegration'),
            nonCoherentIntegration: document.getElementById('nonCoherentIntegration'),
            cfarType: document.getElementById('cfarType'),
            cfarLoss: document.getElementById('cfarLoss'),
            
            // æ³¢å½¢å‚æ•°
            waveformType: document.getElementById('waveformType'),
            pulseWidth: document.getElementById('pulseWidth'),
            bandwidth: document.getElementById('bandwidth'),
            prf: document.getElementById('prf'),
            
            // å·¥ä½œæ¨¡å¼å‚æ•°
            scanMode: document.getElementById('scanMode'),
            dwellTime: document.getElementById('dwellTime'),
            beamWidth: document.getElementById('beamWidth'),
            scanRate: document.getElementById('scanRate'),
            
            // æ˜¾ç¤ºå…ƒç´ 
            target: document.getElementById('target'),
            rangeRings: document.getElementById('rangeRings')
        };

        // åˆå§‹åŒ–
        function init() {
            createRangeRings();
            updateCalculation();
            bindEvents();
            drawChart();
            drawWaveform();
        }

        // ç»‘å®šäº‹ä»¶
        function bindEvents() {
            Object.keys(elements).forEach(key => {
                if (elements[key] && elements[key].addEventListener) {
                    elements[key].addEventListener('input', updateCalculation);
                    elements[key].addEventListener('change', updateCalculation);
                }
            });
        }

        // åˆ‡æ¢æ ‡ç­¾é¡µ
        function switchTab(tabName, container = document) {
            const buttons = container.querySelectorAll('.tab-btn');
            const contents = container.querySelectorAll('.tab-content');
            
            buttons.forEach(btn => btn.classList.remove('active'));
            contents.forEach(content => content.classList.remove('active'));
            
            event.target.classList.add('active');
            const targetContent = document.getElementById(tabName + '-tab');
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        // åˆ›å»ºè·ç¦»ç¯
        function createRangeRings() {
            const rangeRings = document.getElementById('rangeRings');
            rangeRings.innerHTML = '';
            
            for (let i = 1; i <= 4; i++) {
                const ring = document.createElement('div');
                ring.className = 'range-ring';
                const size = i * 80;
                ring.style.width = size + 'px';
                ring.style.height = size + 'px';
                rangeRings.appendChild(ring);
            }
        }

        // æ›´æ–°è®¡ç®—
        function updateCalculation() {
            // è·å–åŸºæœ¬å‚æ•°å€¼
            const pt = parseFloat(elements.pt.value);
            const gt = parseFloat(elements.gt.value);
            const gr = parseFloat(elements.gr.value);
            const sigma = parseFloat(elements.sigma.value);
            const snr = parseFloat(elements.snr.value);
            const freq = parseFloat(elements.freq.value) * 1e9;
            const noiseFigure = parseFloat(elements.noiseFigure.value);
            const systemLoss = parseFloat(elements.systemLoss.value);
            
            // è·å–ä¿¡å·å¤„ç†å‚æ•°
            const coherentIntegration = parseFloat(elements.coherentIntegration.value);
            const nonCoherentIntegration = parseFloat(elements.nonCoherentIntegration.value);
            const cfarLoss = parseFloat(elements.cfarLoss.value);
            
            // è·å–æ³¢å½¢å‚æ•°
            const waveformType = elements.waveformType.value;
            const pulseWidth = parseFloat(elements.pulseWidth.value) * 1e-6;
            const bandwidth = parseFloat(elements.bandwidth.value) * 1e6;
            const prf = parseFloat(elements.prf.value);
            
            // è·å–å·¥ä½œæ¨¡å¼å‚æ•°
            const dwellTime = parseFloat(elements.dwellTime.value) * 1e-3;
            const beamWidth = parseFloat(elements.beamWidth.value);
            const scanRate = parseFloat(elements.scanRate.value);

            // æ›´æ–°æ˜¾ç¤ºå€¼
            updateDisplayValues();

            // è®¡ç®—æ³¢é•¿
            const lambda = CONSTANTS.C / freq;
            document.getElementById('wavelength').textContent = (lambda * 100).toFixed(2) + ' cm';

            // æ ¹æ®æ³¢å½¢ç±»å‹è®¡ç®—è„‰å†²å‹ç¼©æ¯”
            let pulseCompression;
            if (waveformType === 'rect') {
                // çŸ©å½¢è„‰å†²æ²¡æœ‰è„‰å†²å‹ç¼©
                pulseCompression = 1;
            } else {
                // å…¶ä»–æ³¢å½¢ç±»å‹ï¼šLFMã€BPSKã€QPSKç­‰æœ‰è„‰å†²å‹ç¼©
                pulseCompression = Math.max(1, pulseWidth * bandwidth);
            }
            
            // æ›´æ–°è„‰å†²å‹ç¼©æ¯”æ˜¾ç¤º
            document.getElementById('pulseCompressionValue').textContent = pulseCompression.toFixed(0);
            
            // è®¡ç®—å®é™…å¯ç”¨çš„ç›¸å¹²ç§¯ç´¯è„‰å†²æ•°ï¼ˆè€ƒè™‘å¤šç§å·¥ç¨‹çº¦æŸï¼‰
            
            // 1. é©»ç•™æ—¶é—´å†…çš„ç†è®ºæœ€å¤§è„‰å†²æ•°
            const maxAvailablePulses = Math.max(1, Math.floor(dwellTime * prf));
            
            // 2. ç›¸å¹²æ—¶é—´é™åˆ¶ï¼ˆåŸºäºç›®æ ‡è¿åŠ¨å’Œç³»ç»Ÿç¨³å®šæ€§ï¼‰
            // å‡è®¾ç›¸å¹²æ—¶é—´çº¦ä¸º10-100msï¼Œå–å†³äºé¢‘ç‡å’Œç›®æ ‡ç‰¹æ€§
            const coherentTimeLimit = Math.min(0.1, 1.0 / freq * 1e9 * 100); // ç›¸å¹²æ—¶é—´é™åˆ¶
            const maxCoherentPulses = Math.max(1, Math.floor(coherentTimeLimit * prf));
            
            // 3. ç³»ç»Ÿå¤„ç†èƒ½åŠ›é™åˆ¶ï¼ˆå‡è®¾æœ€å¤§å¤„ç†512ä¸ªè„‰å†²ï¼‰
            const maxProcessingPulses = 512;
            
            // 4. å¤šæ™®å‹’å¸¦å®½é™åˆ¶ï¼ˆé¿å…è·¨è¶Šå¤šä¸ªå¤šæ™®å‹’æ»¤æ³¢å™¨ï¼‰
            const dopplerBandwidth = prf / 2; // æœ€å¤§ä¸æ¨¡ç³Šå¤šæ™®å‹’é¢‘ç‡
            const maxDopplerPulses = Math.max(1, Math.floor(dopplerBandwidth / 10)); // ä¿å®ˆä¼°è®¡
            
            // 5. ç»¼åˆæ‰€æœ‰çº¦æŸæ¡ä»¶ï¼Œå–æœ€å°å€¼
            const actualCoherentIntegration = Math.max(1, Math.min(
                coherentIntegration,        // ç”¨æˆ·è®¾å®šå€¼
                maxAvailablePulses,         // é©»ç•™æ—¶é—´é™åˆ¶
                maxCoherentPulses,          // ç›¸å¹²æ—¶é—´é™åˆ¶
                maxProcessingPulses,        // å¤„ç†èƒ½åŠ›é™åˆ¶
                maxDopplerPulses            // å¤šæ™®å‹’å¸¦å®½é™åˆ¶
            ));
            
            // è®¡ç®—å„ç§é™åˆ¶å› å­
            const dwellTimeLimited = actualCoherentIntegration === maxAvailablePulses;
            const coherentTimeLimited = actualCoherentIntegration === maxCoherentPulses;
            const processingLimited = actualCoherentIntegration === maxProcessingPulses;
            const dopplerLimited = actualCoherentIntegration === maxDopplerPulses;
            
            // è°ƒè¯•ä¿¡æ¯
            console.log('ç›¸å¹²ç§¯ç´¯çº¦æŸåˆ†æ:', {
                'è®¾å®šå€¼': coherentIntegration,
                'é©»ç•™æ—¶é—´é™åˆ¶': maxAvailablePulses,
                'ç›¸å¹²æ—¶é—´é™åˆ¶': maxCoherentPulses,
                'å¤„ç†èƒ½åŠ›é™åˆ¶': maxProcessingPulses,
                'å¤šæ™®å‹’é™åˆ¶': maxDopplerPulses,
                'å®é™…ä½¿ç”¨': actualCoherentIntegration,
                'ä¸»è¦é™åˆ¶å› å­': dwellTimeLimited ? 'é©»ç•™æ—¶é—´' : 
                              coherentTimeLimited ? 'ç›¸å¹²æ—¶é—´' :
                              processingLimited ? 'å¤„ç†èƒ½åŠ›' :
                              dopplerLimited ? 'å¤šæ™®å‹’å¸¦å®½' : 'ç”¨æˆ·è®¾å®š'
            });
            
            // è®¡ç®—ä¿¡å·å¤„ç†å¢ç›Š
            const pcGain = 10 * Math.log10(Math.max(1, pulseCompression));
            const ciGain = 10 * Math.log10(actualCoherentIntegration);
            // éç›¸å¹²ç§¯ç´¯å¢ç›Šï¼š5 Ã— log10(N) - ç†è®ºå…¬å¼ï¼Œå½“N=0æ—¶å¢ç›Šä¸º0
            const nciGain = nonCoherentIntegration > 0 ? 5 * Math.log10(nonCoherentIntegration) : 0;
            
            // PRFå¯¹è„‰å†²èƒ½é‡çš„å½±å“ï¼ˆå ç©ºæ¯”æ•ˆåº”ï¼‰
            const dutyCycle = pulseWidth * prf;
            const dutyCycleGain = dutyCycle < 0.1 ? 10 * Math.log10(dutyCycle / 0.01) : 0; // åŸºå‡†å ç©ºæ¯”1%
            
            const totalGain = pcGain + ciGain + nciGain + dutyCycleGain;
            
            // æ›´æ–°å¢ç›Šæ˜¾ç¤º
            document.getElementById('pcGain').textContent = pcGain.toFixed(1) + ' dB (10Ã—logâ‚â‚€(' + pulseCompression + '))';
            
            // ç›¸å¹²ç§¯ç´¯å¢ç›Šæ˜¾ç¤ºï¼ŒåŒ…å«é™åˆ¶å› å­ä¿¡æ¯
            let ciGainText = ciGain.toFixed(1) + ' dB (å®é™…:' + actualCoherentIntegration + '/' + coherentIntegration + ')';
            let ciGainColor = '#4CAF50';
            let ciGainTitle = '';
            
            // æ ¹æ®é™åˆ¶å› å­è®¾ç½®é¢œè‰²å’Œæç¤º
            if (actualCoherentIntegration < coherentIntegration) {
                ciGainColor = '#ff9800';
                if (dwellTimeLimited) {
                    ciGainTitle = 'å—é©»ç•™æ—¶é—´é™åˆ¶ï¼šéœ€è¦' + (coherentIntegration / prf * 1000).toFixed(1) + 'msé©»ç•™æ—¶é—´';
                } else if (coherentTimeLimited) {
                    ciGainTitle = 'å—ç›¸å¹²æ—¶é—´é™åˆ¶ï¼šç›®æ ‡è¿åŠ¨æˆ–ç³»ç»Ÿä¸ç¨³å®š';
                } else if (processingLimited) {
                    ciGainTitle = 'å—å¤„ç†èƒ½åŠ›é™åˆ¶ï¼šç³»ç»Ÿæœ€å¤§å¤„ç†' + maxProcessingPulses + 'ä¸ªè„‰å†²';
                } else if (dopplerLimited) {
                    ciGainTitle = 'å—å¤šæ™®å‹’å¸¦å®½é™åˆ¶ï¼šé¿å…è·¨è¶Šæ»¤æ³¢å™¨';
                }
            } else {
                ciGainTitle = 'ç›¸å¹²ç§¯ç´¯æœªå—é™åˆ¶ï¼Œæ€§èƒ½æœ€ä¼˜';
            }
            
            document.getElementById('ciGain').textContent = ciGainText;
            document.getElementById('ciGain').style.color = ciGainColor;
            document.getElementById('ciGain').title = ciGainTitle;
            
            document.getElementById('nciGain').textContent = nciGain.toFixed(1) + ' dB (5Ã—logâ‚â‚€(' + nonCoherentIntegration + '))';
            document.getElementById('totalGain').textContent = totalGain.toFixed(1) + ' dB';
            
            // è®¡ç®—ç›¸å¹²ç§¯ç´¯æ•ˆç‡
            const coherentEfficiency = actualCoherentIntegration / Math.max(1, coherentIntegration);

            // è½¬æ¢ä¸ºdBè¿›è¡Œè®¡ç®—
            const ptDb = 10 * Math.log10(pt);
            const sigmaDb = 10 * Math.log10(sigma);
            const mtdDb = 10 * Math.log10(CONSTANTS.MTD);
            const pulseWidthDb = 10 * Math.log10(pulseWidth);
            const lambdaDb = 20 * Math.log10(lambda);
            
            const kDb = 10 * Math.log10(CONSTANTS.K);
            const tDb = 10 * Math.log10(CONSTANTS.T);
            const zfDb = 10 * Math.log10(Math.pow(4 * Math.PI, 3));

            // è®¡ç®—åˆ†å­å’Œåˆ†æ¯ï¼ˆåŒ…å«ä¿¡å·å¤„ç†å¢ç›Šï¼‰
            const numerator = ptDb + gt + gr + sigmaDb + mtdDb + pulseWidthDb + lambdaDb + totalGain;
            const denominator = kDb + tDb + noiseFigure + systemLoss + snr + zfDb + cfarLoss;
            
            // è®¡ç®—R^4 (dB)
            const r4db = numerator - denominator;
            
            // è®¡ç®—æœ€å¤§æ¢æµ‹è·ç¦»
            const r4 = Math.pow(10, r4db / 10);
            const maxRange = Math.pow(r4, 1/4) / 1000; // è½¬æ¢ä¸ºkm

            // æ›´æ–°è®¡ç®—è¯¦æƒ…æ˜¾ç¤ºå¹¶è·å–ä¿®æ­£åçš„æ¢æµ‹è·ç¦»
            const correctedMaxRange = updateCalculationDetails({
                pt, gt, gr, sigma, lambda, pulseWidth, noiseFigure, systemLoss, snr, cfarLoss,
                ptDb, sigmaDb, pulseWidthDb, lambdaDb, kDb, tDb, zfDb,
                pcGain, ciGain, nciGain, numerator, denominator, r4db, r4, maxRange
            });

            // è®¡ç®—å…¶ä»–æ€§èƒ½å‚æ•°
            const rangeResolution = CONSTANTS.C / (2 * bandwidth);
            const maxUnambiguousRange = CONSTANTS.C / (2 * prf) / 1000;
            const detectionProb = calculateDetectionProbability(snr, coherentIntegration, nonCoherentIntegration);
            const falseAlarmProb = calculateFalseAlarmProbability(elements.cfarType.value);
            
            // è®¡ç®—æœ‰æ•ˆæ¢æµ‹è·ç¦»ï¼ˆå–æœ€å¤§æ¢æµ‹è·ç¦»å’Œæœ€å¤§ä¸æ¨¡ç³Šè·ç¦»çš„è¾ƒå°å€¼ï¼‰
            const effectiveRange = Math.min(correctedMaxRange, maxUnambiguousRange);
            
            // æ›´æ–°æ˜¾ç¤º
            document.getElementById('maxRange').textContent = correctedMaxRange.toFixed(2) + ' km';
            document.getElementById('maxRangeDisplay').textContent = effectiveRange.toFixed(2) + ' km';
            document.getElementById('rangeResolution').textContent = rangeResolution.toFixed(1) + ' m';
            document.getElementById('maxUnambiguousRange').textContent = maxUnambiguousRange.toFixed(1) + ' km';
            document.getElementById('detectionProb').textContent = (detectionProb * 100).toFixed(1) + '%';
            document.getElementById('falseAlarmProb').textContent = falseAlarmProb.toExponential(2);
            document.getElementById('availablePulses').textContent = maxAvailablePulses;
            document.getElementById('prfEfficiency').textContent = (prfEfficiency * 100).toFixed(0) + '%';
            
            // æ›´æ–°çº¦æŸçŠ¶æ€æ˜¾ç¤º
            const constraintStatus = document.getElementById('constraintStatus');
            if (correctedMaxRange > maxUnambiguousRange) {
                constraintStatus.textContent = 'âš ï¸ è¿å';
                constraintStatus.style.color = '#ff4444';
                constraintStatus.title = 'æ¢æµ‹è·ç¦»è¶…è¿‡ä¸æ¨¡ç³Šè·ç¦»';
            } else {
                constraintStatus.textContent = 'âœ“ æ»¡è¶³';
                constraintStatus.style.color = '#4CAF50';
                constraintStatus.title = 'è·ç¦»çº¦æŸæ»¡è¶³';
            }
            
            // æ£€æŸ¥è·ç¦»çº¦æŸï¼šæœ€å¤§æ¢æµ‹è·ç¦»åº”å°äºæœ€å¤§ä¸æ¨¡ç³Šè·ç¦»
            checkRangeConstraint(correctedMaxRange, maxUnambiguousRange);
            
            // ç†è®ºéªŒè¯
            validateTheory(pcGain, ciGain, nciGain, pulseCompression, actualCoherentIntegration, nonCoherentIntegration);
            
            // æ›´æ–°æ€§èƒ½æŒ‡ç¤ºå™¨
            updatePerformanceIndicator(effectiveRange, detectionProb);
            
            // æ›´æ–°ç›®æ ‡ä½ç½®
            updateTargetPosition(effectiveRange);
            
            // æ›´æ–°æ‰«æåŠ¨ç”»
            updateScanAnimation();
            
            // æ›´æ–°æ³¢å½¢æ˜¾ç¤º
            drawWaveform();
            
            // æ›´æ–°æ€§èƒ½åˆ†ææ˜¾ç¤º
            updatePerformanceAnalysis({
                effectiveRange,
                maxRange: correctedMaxRange,
                maxUnambiguousRange,
                detectionProb,
                rangeResolution,
                totalGain,
                prfEfficiency,
                bandwidth,
                prf
            });
            
            // æ›´æ–°ç›²åŒºåˆ†ææ˜¾ç¤º
            updateBlindZoneAnalysis({
                prf,
                freq,
                pulseWidth: parseFloat(elements.pulseWidth.value), // ä¼ é€’åŸå§‹å¾®ç§’å€¼
                beamWidth,
                maxRange: correctedMaxRange,
                maxUnambiguousRange,
                lambda
            });
        }

        // æ›´æ–°æ€§èƒ½åˆ†ææ˜¾ç¤º
        function updatePerformanceAnalysis(params) {
            const {
                effectiveRange,
                maxRange,
                maxUnambiguousRange,
                detectionProb,
                rangeResolution,
                totalGain,
                prfEfficiency,
                bandwidth,
                prf
            } = params;
            
            // è®¡ç®—å„é¡¹æ€§èƒ½è¯„åˆ† (0-100)
            const detectionScore = Math.min(100, Math.max(0, 
                (effectiveRange / 100) * 30 + // æ¢æµ‹è·ç¦»è´¡çŒ®30%
                (detectionProb * 100) * 0.7   // æ£€æµ‹æ¦‚ç‡è´¡çŒ®70%
            ));
            
            const resolutionScore = Math.min(100, Math.max(0,
                (bandwidth / 1000) * 50 +      // å¸¦å®½è´¡çŒ®50%
                (1000 / Math.max(1, rangeResolution)) * 50  // è·ç¦»åˆ†è¾¨ç‡è´¡çŒ®50%
            ));
            
            const efficiencyScore = Math.min(100, Math.max(0,
                prfEfficiency * 60 +           // PRFæ•ˆç‡è´¡çŒ®60%
                (totalGain / 50) * 40          // æ€»å¢ç›Šè´¡çŒ®40%
            ));
            
            // æ›´æ–°æ˜¾ç¤º
            
            updateScoreBar('detectionScore', detectionScore);
            updateScoreBar('resolutionScore', resolutionScore);
            updateScoreBar('efficiencyScore', efficiencyScore);
            
            updateScoreText('detectionText', detectionScore);
            updateScoreText('resolutionText', resolutionScore);
            updateScoreText('efficiencyText', efficiencyScore);
        }
        

        
        // æ›´æ–°è¯„åˆ†æ¡
        function updateScoreBar(elementId, score) {
            const element = document.getElementById(elementId);
            element.style.width = score + '%';
            element.style.background = `linear-gradient(90deg, ${getScoreGradient(score)})`;
        }
        
        // æ›´æ–°è¯„åˆ†æ–‡æœ¬
        function updateScoreText(elementId, score) {
            const element = document.getElementById(elementId);
            const text = getScoreText(score);
            const color = getScoreColor(score);
            element.textContent = text;
            element.style.color = color;
        }
        
        // è·å–è¯„åˆ†é¢œè‰²
        function getScoreColor(score) {
            if (score >= 80) return '#4CAF50';      // ç»¿è‰² - ä¼˜ç§€
            if (score >= 60) return '#FFC107';      // é»„è‰² - è‰¯å¥½
            if (score >= 40) return '#FF9800';      // æ©™è‰² - ä¸€èˆ¬
            return '#F44336';                       // çº¢è‰² - è¾ƒå·®
        }
        
        // è·å–è¯„åˆ†æ¸å˜
        function getScoreGradient(score) {
            if (score >= 80) return '#4CAF50, #66BB6A';
            if (score >= 60) return '#FFC107, #FFD54F';
            if (score >= 40) return '#FF9800, #FFB74D';
            return '#F44336, #EF5350';
        }
        
        // è·å–è¯„åˆ†æ–‡æœ¬
        function getScoreText(score) {
            if (score >= 80) return 'ä¼˜ç§€';
            if (score >= 60) return 'è‰¯å¥½';
            if (score >= 40) return 'ä¸€èˆ¬';
            return 'è¾ƒå·®';
        }
        
        // æ›´æ–°ç›²åŒºåˆ†ææ˜¾ç¤º
        function updateBlindZoneAnalysis(params) {
            const { prf, freq, pulseWidth, beamWidth, maxRange, maxUnambiguousRange, lambda } = params;
            
            // è®¡ç®—æœ€å°æ¢æµ‹è·ç¦»ï¼ˆåŸºäºè„‰å†²å®½åº¦å’Œå‘å°„æœºæ¢å¤æ—¶é—´ï¼‰
            const recoveryTime = 0.1; // å‡è®¾0.1Î¼sæ¢å¤æ—¶é—´ï¼ˆæ›´ç°å®çš„å€¼ï¼‰
            const minRangePulse = CONSTANTS.C * pulseWidth * 1e-6 / 2 / 1000; // Î¼sè½¬ç§’ï¼Œmè½¬km
            const minRangeRecovery = CONSTANTS.C * recoveryTime * 1e-6 / 2 / 1000; // Î¼sè½¬ç§’ï¼Œmè½¬km
            const minDetectionRange = Math.max(minRangePulse, minRangeRecovery);
            
            // è®¡ç®—è·ç¦»æ¨¡ç³Šç›²åŒº
            const rangeAmbiguityBlind = maxRange > maxUnambiguousRange ? 
                `>${maxUnambiguousRange.toFixed(1)}km` : 'æ— ';
            
            // è®¡ç®—ç¬¬ä¸€ç›²é€Ÿ
            const firstBlindSpeed = lambda * prf / 2; // m/s
            
            // è®¡ç®—å¤šæ™®å‹’ç›²åŒºæ•°é‡ï¼ˆåœ¨Â±100 m/sèŒƒå›´å†…ï¼‰
            const maxVelocity = 100; // m/s
            const dopplerBlindZones = Math.floor(2 * maxVelocity / firstBlindSpeed) + 1;
            
            // è®¡ç®—è§’åº¦ç›²åŒºï¼ˆåŸºäºæ³¢æŸå®½åº¦ï¼‰
            const angleBlindZone = beamWidth / 2;
            
            // è®¡ç®—ç›²åŒºè¦†ç›–ç‡ï¼ˆç®€åŒ–ä¼°ç®—ï¼‰
            const minRangeRatio = minDetectionRange / Math.max(maxRange, 1);
            const ambiguityRatio = maxRange > maxUnambiguousRange ? 0.1 : 0;
            const angleRatio = (angleBlindZone * 2) / 360;
            const blindZoneCoverage = (minRangeRatio + ambiguityRatio + angleRatio) * 100;
            
            // æ›´æ–°æ˜¾ç¤ºï¼ˆæ ¹æ®æ•°å€¼å¤§å°é€‰æ‹©åˆé€‚çš„å•ä½ï¼‰
            if (minDetectionRange < 1) {
                document.getElementById('minDetectionRange').textContent = (minDetectionRange * 1000).toFixed(0) + ' m';
            } else {
                document.getElementById('minDetectionRange').textContent = minDetectionRange.toFixed(3) + ' km';
            }
            document.getElementById('rangeAmbiguityBlind').textContent = rangeAmbiguityBlind;
            document.getElementById('firstBlindSpeed').textContent = firstBlindSpeed.toFixed(1) + ' m/s';
            document.getElementById('dopplerBlindZones').textContent = Math.min(dopplerBlindZones, 20);
            document.getElementById('angleBlindZone').textContent = 'Â±' + angleBlindZone.toFixed(1) + 'Â°';
            document.getElementById('blindZoneCoverage').textContent = Math.min(blindZoneCoverage, 100).toFixed(1) + '%';
            
            // æ ¹æ®ç›²åŒºæƒ…å†µæ›´æ–°é¢œè‰²
            updateBlindZoneColors({
                minDetectionRange,
                rangeAmbiguityBlind,
                blindZoneCoverage
            });
        }
        
        // æ›´æ–°ç›²åŒºé¢œè‰²æŒ‡ç¤º
        function updateBlindZoneColors(params) {
            const { minDetectionRange, rangeAmbiguityBlind, blindZoneCoverage } = params;
            
            // æœ€å°æ¢æµ‹è·ç¦»é¢œè‰²
            const minRangeElement = document.getElementById('minDetectionRange');
            if (minDetectionRange > 1.0) {
                minRangeElement.style.color = '#ff4444';
            } else if (minDetectionRange > 0.5) {
                minRangeElement.style.color = '#ff9800';
            } else {
                minRangeElement.style.color = '#4CAF50';
            }
            
            // è·ç¦»æ¨¡ç³Šç›²åŒºé¢œè‰²
            const ambiguityElement = document.getElementById('rangeAmbiguityBlind');
            if (rangeAmbiguityBlind !== 'æ— ') {
                ambiguityElement.style.color = '#ff4444';
            } else {
                ambiguityElement.style.color = '#4CAF50';
            }
            
            // ç›²åŒºè¦†ç›–ç‡é¢œè‰²
            const coverageElement = document.getElementById('blindZoneCoverage');
            if (blindZoneCoverage > 20) {
                coverageElement.style.color = '#ff4444';
            } else if (blindZoneCoverage > 10) {
                coverageElement.style.color = '#ff9800';
            } else {
                coverageElement.style.color = '#4CAF50';
            }
        }
        
        // æ›´æ–°æ˜¾ç¤ºå€¼
        function updateDisplayValues() {
            document.getElementById('ptValue').textContent = elements.pt.value + ' W';
            document.getElementById('gtValue').textContent = elements.gt.value + ' dB';
            document.getElementById('grValue').textContent = elements.gr.value + ' dB';
            document.getElementById('sigmaValue').textContent = elements.sigma.value + ' mÂ²';
            document.getElementById('snrValue').textContent = elements.snr.value + ' dB';
            document.getElementById('freqValue').textContent = (parseFloat(elements.freq.value)).toFixed(1) + ' GHz';
            
            document.getElementById('coherentIntegrationValue').textContent = elements.coherentIntegration.value;
            document.getElementById('nonCoherentIntegrationValue').textContent = elements.nonCoherentIntegration.value;
            document.getElementById('cfarLossValue').textContent = elements.cfarLoss.value + ' dB';
            
            document.getElementById('pulseWidthValue').textContent = elements.pulseWidth.value + ' Î¼s';
            document.getElementById('bandwidthValue').textContent = elements.bandwidth.value + ' MHz';
            document.getElementById('prfValue').textContent = elements.prf.value + ' Hz';
            
            document.getElementById('dwellTimeValue').textContent = elements.dwellTime.value + ' ms';
            document.getElementById('beamWidthValue').textContent = elements.beamWidth.value + 'Â°';
            document.getElementById('scanRateValue').textContent = elements.scanRate.value + ' Â°/s';
        }

        // è®¡ç®—æ£€æµ‹æ¦‚ç‡
        function calculateDetectionProbability(snr, ci, nci) {
            const snrLinear = Math.pow(10, snr / 10);
            const effectiveSNR = snrLinear * ci * Math.sqrt(nci);
            // ç®€åŒ–çš„æ£€æµ‹æ¦‚ç‡è®¡ç®—ï¼ˆåŸºäºé«˜æ–¯è¿‘ä¼¼ï¼‰
            const pd = 0.5 * (1 + Math.tanh((Math.log10(effectiveSNR) - 1) * 2));
            return Math.min(Math.max(pd, 0), 1);
        }

        // è®¡ç®—è™šè­¦æ¦‚ç‡
        function calculateFalseAlarmProbability(cfarType) {
            const basePfa = 1e-6;
            const multipliers = {
                'ca': 1.0,
                'go': 0.8,
                'so': 1.2,
                'os': 0.9
            };
            return basePfa * (multipliers[cfarType] || 1.0);
        }

        // æ£€æŸ¥è·ç¦»çº¦æŸ
        function checkRangeConstraint(maxRange, maxUnambiguousRange) {
            const rangeElement = document.getElementById('maxRange');
            const unambiguousElement = document.getElementById('maxUnambiguousRange');
            
            if (maxRange > maxUnambiguousRange) {
                // è¿åçº¦æŸï¼šæ¢æµ‹è·ç¦» > ä¸æ¨¡ç³Šè·ç¦»
                rangeElement.style.color = '#ff4444';
                rangeElement.title = 'è­¦å‘Šï¼šæ¢æµ‹è·ç¦»è¶…è¿‡ä¸æ¨¡ç³Šè·ç¦»ï¼Œä¼šäº§ç”Ÿè·ç¦»æ¨¡ç³Šï¼';
                unambiguousElement.style.color = '#ff9800';
                unambiguousElement.title = 'å»ºè®®ï¼šé™ä½PRFæˆ–æ¥å—è·ç¦»æ¨¡ç³Š';
                
                // æ˜¾ç¤ºçº¦æŸè¿åè­¦å‘Š
                showConstraintWarning(maxRange, maxUnambiguousRange);
            } else {
                // æ»¡è¶³çº¦æŸ
                rangeElement.style.color = '#4CAF50';
                rangeElement.title = 'æ¢æµ‹è·ç¦»åœ¨ä¸æ¨¡ç³ŠèŒƒå›´å†…';
                unambiguousElement.style.color = '#4CAF50';
                unambiguousElement.title = 'ä¸æ¨¡ç³Šè·ç¦»å……è¶³';
                
                // éšè—è­¦å‘Š
                hideConstraintWarning();
            }
        }
        
        // æ˜¾ç¤ºçº¦æŸè¿åè­¦å‘Š
        function showConstraintWarning(maxRange, maxUnambiguousRange) {
            let warningDiv = document.getElementById('constraintWarning');
            if (!warningDiv) {
                warningDiv = document.createElement('div');
                warningDiv.id = 'constraintWarning';
                warningDiv.style.cssText = `
                    background: rgba(255, 68, 68, 0.1);
                    border: 1px solid #ff4444;
                    border-radius: 8px;
                    padding: 15px;
                    margin: 10px 0;
                    color: #ff4444;
                    font-size: 0.9em;
                    animation: pulse 2s ease-in-out infinite;
                `;
                document.querySelector('.results').appendChild(warningDiv);
            }
            
            const ambiguousRange = maxRange - maxUnambiguousRange;
            const ambiguousPercent = (ambiguousRange / maxRange * 100).toFixed(1);
            
            warningDiv.innerHTML = `
                <strong>âš ï¸ è·ç¦»çº¦æŸè¿åè­¦å‘Š</strong><br>
                æ¢æµ‹è·ç¦» (${maxRange.toFixed(1)} km) > ä¸æ¨¡ç³Šè·ç¦» (${maxUnambiguousRange.toFixed(1)} km)<br>
                æ¨¡ç³ŠèŒƒå›´ï¼š${ambiguousRange.toFixed(1)} km (${ambiguousPercent}%)<br>
                <small>å»ºè®®ï¼šé™ä½PRFè‡³ ${(CONSTANTS.C / (2 * maxRange * 1000)).toFixed(0)} Hz æˆ–ä½¿ç”¨è§£æ¨¡ç³ŠæŠ€æœ¯</small>
            `;
        }
        
        // éšè—çº¦æŸè­¦å‘Š
        function hideConstraintWarning() {
            const warningDiv = document.getElementById('constraintWarning');
            if (warningDiv) {
                warningDiv.remove();
            }
        }
        
        // ç†è®ºéªŒè¯å‡½æ•°
        function validateTheory(pcGain, ciGain, nciGain, pcRatio, ciPulses, nciTimes) {
            const theoryElement = document.getElementById('theoryValidation');
            let validationErrors = [];
            
            // éªŒè¯è„‰å†²å‹ç¼©å¢ç›Šå…¬å¼ï¼š10Ã—log10(å‹ç¼©æ¯”)
            const expectedPcGain = 10 * Math.log10(pcRatio);
            if (Math.abs(pcGain - expectedPcGain) > 0.01) {
                validationErrors.push('è„‰å†²å‹ç¼©å¢ç›Šè®¡ç®—é”™è¯¯');
            }
            
            // éªŒè¯ç›¸å¹²ç§¯ç´¯å¢ç›Šå…¬å¼ï¼š10Ã—log10(è„‰å†²æ•°)
            const expectedCiGain = 10 * Math.log10(ciPulses);
            if (Math.abs(ciGain - expectedCiGain) > 0.01) {
                validationErrors.push('ç›¸å¹²ç§¯ç´¯å¢ç›Šè®¡ç®—é”™è¯¯');
            }
            
            // éªŒè¯éç›¸å¹²ç§¯ç´¯å¢ç›Šå…¬å¼ï¼š5Ã—log10(ç§¯ç´¯æ¬¡æ•°)ï¼Œå½“ç§¯ç´¯æ¬¡æ•°ä¸º0æ—¶è·³è¿‡éªŒè¯
            if (nciTimes > 0) {
                const expectedNciGain = 5 * Math.log10(nciTimes);
                if (Math.abs(nciGain - expectedNciGain) > 0.01) {
                    validationErrors.push('éç›¸å¹²ç§¯ç´¯å¢ç›Šè®¡ç®—é”™è¯¯');
                }
            } else {
                // å½“éç›¸å¹²ç§¯ç´¯æ¬¡æ•°ä¸º0æ—¶ï¼Œå¢ç›Šåº”è¯¥ä¸º0
                if (Math.abs(nciGain - 0) > 0.01) {
                    validationErrors.push('éç›¸å¹²ç§¯ç´¯å¢ç›Šè®¡ç®—é”™è¯¯ï¼šåº”ä¸º0dB');
                }
            }
            
            // æ›´æ–°éªŒè¯çŠ¶æ€
            if (validationErrors.length === 0) {
                theoryElement.textContent = 'âœ“ å…¬å¼æ­£ç¡®';
                theoryElement.style.color = '#4CAF50';
                theoryElement.title = 'æ‰€æœ‰ç†è®ºå…¬å¼éªŒè¯é€šè¿‡';
            } else {
                theoryElement.textContent = 'âš ï¸ å…¬å¼å¼‚å¸¸';
                theoryElement.style.color = '#ff9800';
                theoryElement.title = 'å‘ç°é—®é¢˜: ' + validationErrors.join(', ');
            }
        }

        // æ›´æ–°æ€§èƒ½æŒ‡ç¤ºå™¨
        function updatePerformanceIndicator(range, pd) {
            const performance = Math.min((range / 100) * 0.5 + pd * 0.5, 1) * 100;
            document.getElementById('performanceBar').style.width = performance + '%';
            document.getElementById('performanceText').textContent = performance.toFixed(0) + '%';
        }

        // æ›´æ–°æ‰«ææ¨¡å¼åŠ¨ç”»
        function updateScanAnimation() {
            const scanMode = elements.scanMode.value;
            const scanRate = parseFloat(elements.scanRate.value);
            const dwellTime = parseFloat(elements.dwellTime.value);
            const sweep = document.querySelector('.radar-sweep');
            
            // è®¡ç®—åŠ¨ç”»æŒç»­æ—¶é—´
            let animationDuration;
            let animationName;
            
            switch (scanMode) {
                case 'circular':
                    animationDuration = 360 / scanRate; // å®Œæ•´åœ†æ‰«æ—¶é—´
                    animationName = 'sweep-circular';
                    break;
                case 'sector':
                    animationDuration = (90 / scanRate) * 2; // æ‰‡æ‰«å¾€è¿”æ—¶é—´
                    animationName = 'sweep-sector';
                    break;
                case 'track':
                    animationDuration = dwellTime / 250; // è·Ÿè¸ªæ¨¡å¼æ…¢é€Ÿæ‘†åŠ¨
                    animationName = 'sweep-track';
                    break;
                case 'search':
                    animationDuration = 360 / scanRate * 1.5; // æœç´¢æ¨¡å¼åˆ†æ­¥æ‰«æ
                    animationName = 'sweep-search';
                    break;
                default:
                    animationDuration = 3;
                    animationName = 'sweep-circular';
            }
            
            sweep.style.animation = `${animationName} ${animationDuration}s linear infinite`;
        }

        // æ›´æ–°ç›®æ ‡ä½ç½®
        function updateTargetPosition(range) {
            const target = document.getElementById('target');
            const maxDisplayRange = 100; // km
            const radarRadius = 180; // px
            const scanMode = elements.scanMode.value;
            
            let displayRange = Math.min(range, maxDisplayRange);
            let distance = (displayRange / maxDisplayRange) * radarRadius;
            
            // æ ¹æ®æ‰«ææ¨¡å¼è°ƒæ•´ç›®æ ‡ä½ç½®
            let angle;
            switch (scanMode) {
                case 'circular':
                    angle = (Date.now() / 50) % 360;
                    break;
                case 'sector':
                    const sectorTime = (Date.now() / 50) % 180;
                    angle = sectorTime > 90 ? 180 - sectorTime : sectorTime;
                    angle -= 45; // ä¸­å¿ƒåœ¨0åº¦
                    break;
                case 'track':
                    angle = Math.sin(Date.now() / 1000) * 20; // Â±20åº¦æ‘†åŠ¨
                    break;
                case 'search':
                    const searchStep = Math.floor((Date.now() / 1000) % 5);
                    angle = searchStep * 72; // 5ä¸ªæ–¹å‘æœç´¢
                    break;
                default:
                    angle = (Date.now() / 50) % 360;
            }
            
            const radian = (angle * Math.PI) / 180;
            const x = Math.cos(radian) * distance;
            const y = Math.sin(radian) * distance;
            
            target.style.left = `calc(50% + ${x}px)`;
            target.style.top = `calc(50% + ${y}px)`;
            
            // å¦‚æœè¶…å‡ºæœ€å¤§æ˜¾ç¤ºèŒƒå›´ï¼Œè°ƒæ•´é€æ˜åº¦
            target.style.opacity = range > maxDisplayRange ? '0.3' : '1';
        }

        // åˆ‡æ¢ç†è®ºè¯´æ˜é¢æ¿

         

         

        
        // ç»˜åˆ¶æ³¢å½¢
        function drawWaveform() {
            const canvas = document.getElementById('waveformCanvas');
            const ctx = canvas.getContext('2d');
            const waveformType = elements.waveformType.value;
            const pulseWidth = parseFloat(elements.pulseWidth.value);
            const bandwidth = parseFloat(elements.bandwidth.value);
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = 'rgba(255,255,255,0.2)';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 6; i++) {
                const y = (canvas.height / 6) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            for (let i = 0; i <= 10; i++) {
                const x = (canvas.width / 10) * i;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶æ³¢å½¢
            ctx.strokeStyle = '#4CAF50';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            const centerY = canvas.height / 2;
            const amplitude = canvas.height * 0.3;
            
            for (let x = 0; x < canvas.width; x++) {
                const t = (x / canvas.width) * pulseWidth * 2;
                let y = centerY;
                
                if (t < pulseWidth) {
                    switch (waveformType) {
                        case 'rect':
                            y = centerY - amplitude;
                            break;
                        case 'lfm':
                            const freq = 2 * Math.PI * bandwidth * t / pulseWidth;
                            y = centerY - amplitude * Math.sin(freq * t);
                            break;
                        case 'bpsk':
                            const phase = Math.floor(t / (pulseWidth / 8)) % 2 === 0 ? 0 : Math.PI;
                            y = centerY - amplitude * Math.sin(2 * Math.PI * 10 * t + phase);
                            break;
                        case 'qpsk':
                            const qphase = Math.floor(t / (pulseWidth / 4)) % 4 * Math.PI / 2;
                            y = centerY - amplitude * Math.sin(2 * Math.PI * 10 * t + qphase);
                            break;
                    }
                }
                
                if (x === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            
            ctx.stroke();
            
            // æ·»åŠ æ ‡ç­¾
            ctx.fillStyle = 'white';
            ctx.font = '12px Microsoft YaHei';
            ctx.fillText(`æ³¢å½¢: ${getWaveformName(waveformType)}`, 10, 20);
            ctx.fillText(`è„‰å®½: ${pulseWidth}Î¼s`, 10, 35);
            ctx.fillText(`å¸¦å®½: ${bandwidth}MHz`, 10, 50);
        }

        // è·å–æ³¢å½¢åç§°
        function getWaveformName(type) {
            const names = {
                'rect': 'çŸ©å½¢è„‰å†²',
                'lfm': 'çº¿æ€§è°ƒé¢‘',
                'bpsk': 'äºŒç›¸ç¼–ç ',
                'qpsk': 'å››ç›¸ç¼–ç '
            };
            return names[type] || type;
        }

        // åº”ç”¨æ‰‹åŠ¨è¾“å…¥çš„å‚æ•°å€¼
        function applyManualInput(paramId) {
            const inputElement = document.getElementById(paramId + 'Input');
            const sliderElement = document.getElementById(paramId);
            const valueElement = document.getElementById(paramId + 'Value');
            
            if (!inputElement || !sliderElement || !valueElement) {
                console.error('æ‰¾ä¸åˆ°å‚æ•°å…ƒç´ :', paramId);
                return;
            }
            
            const inputValue = parseFloat(inputElement.value);
            const min = parseFloat(sliderElement.min);
            const max = parseFloat(sliderElement.max);
            
            // éªŒè¯è¾“å…¥å€¼èŒƒå›´
            if (isNaN(inputValue)) {
                alert('è¯·è¾“å…¥æœ‰æ•ˆçš„æ•°å€¼');
                return;
            }
            
            if (inputValue < min || inputValue > max) {
                alert(`å‚æ•°å€¼å¿…é¡»åœ¨ ${min} åˆ° ${max} ä¹‹é—´`);
                return;
            }
            
            // æ›´æ–°æ»‘å—å€¼
            sliderElement.value = inputValue;
            
            // æ›´æ–°æ˜¾ç¤ºå€¼
            updateParameterDisplay(paramId, inputValue);
            
            // æ¸…ç©ºè¾“å…¥æ¡†
            inputElement.value = '';
            
            // é‡æ–°è®¡ç®—
            updateCalculation();
        }
        
        // æ›´æ–°å‚æ•°æ˜¾ç¤ºå€¼
        function updateParameterDisplay(paramId, value) {
            const valueElement = document.getElementById(paramId + 'Value');
            
            switch(paramId) {
                case 'pt':
                    valueElement.textContent = value + ' W';
                    break;
                case 'gt':
                case 'gr':
                case 'snr':
                case 'cfarLoss':
                case 'noiseFigure':
                case 'systemLoss':
                    valueElement.textContent = value + ' dB';
                    break;
                case 'sigma':
                    valueElement.textContent = value + ' mÂ²';
                    break;
                case 'freq':
                    valueElement.textContent = value + ' GHz';
                    break;
                case 'coherentIntegration':
                case 'nonCoherentIntegration':
                    valueElement.textContent = value;
                    break;
                case 'pulseWidth':
                    valueElement.textContent = value + ' Î¼s';
                    break;
                case 'bandwidth':
                    valueElement.textContent = value + ' MHz';
                    break;
                case 'prf':
                    valueElement.textContent = value + ' Hz';
                    break;
                case 'dwellTime':
                    valueElement.textContent = value + ' ms';
                    break;
                case 'beamWidth':
                case 'scanRate':
                    valueElement.textContent = value + (paramId === 'beamWidth' ? 'Â°' : ' Â°/s');
                    break;
                default:
                    valueElement.textContent = value;
            }
        }
        
        // ä¸ºæ‰‹åŠ¨è¾“å…¥æ¡†æ·»åŠ å›è½¦é”®æ”¯æŒ
        document.addEventListener('DOMContentLoaded', function() {
            const inputs = document.querySelectorAll('.parameter-manual-input');
            inputs.forEach(input => {
                input.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        const paramId = this.id.replace('Input', '');
                        applyManualInput(paramId);
                    }
                });
            });
        });
        
        // æ›´æ–°è®¡ç®—è¯¦æƒ…æ˜¾ç¤º
        function updateCalculationDetails(params) {
            const {
                pt, gt, gr, sigma, lambda, pulseWidth, noiseFigure, systemLoss, snr, cfarLoss,
                ptDb, sigmaDb, pulseWidthDb, lambdaDb, kDb, tDb, zfDb,
                pcGain, ciGain, nciGain, numerator, denominator, r4db, r4, maxRange
            } = params;
            
            // æ›´æ–°åˆ†å­éƒ¨åˆ†
            document.getElementById('ptCalc').textContent = `${pt.toFixed(0)} W (${ptDb.toFixed(1)} dB)`;
            document.getElementById('gtCalc').textContent = `${gt.toFixed(1)} dB`;
            document.getElementById('grCalc').textContent = `${gr.toFixed(1)} dB`;
            document.getElementById('lambdaCalc').textContent = `${(lambda * lambda).toExponential(3)} mÂ² (${lambdaDb.toFixed(1)} dB)`;
            document.getElementById('sigmaCalc').textContent = `${sigma.toFixed(4)} mÂ² (${sigmaDb.toFixed(1)} dB)`;
            document.getElementById('tauCalc').textContent = `${(pulseWidth * 1e6).toFixed(1)} Î¼s (${pulseWidthDb.toFixed(1)} dB)`;
            document.getElementById('pcGainCalc').textContent = `${pcGain.toFixed(1)} dB`;
            document.getElementById('ciGainCalc').textContent = `${ciGain.toFixed(1)} dB`;
            document.getElementById('nciGainCalc').textContent = `${nciGain.toFixed(1)} dB`;
            
            // é‡æ–°è®¡ç®—åˆ†å­æ€»å’Œï¼ŒåªåŒ…å«ç•Œé¢æ˜¾ç¤ºçš„é¡¹ç›®ï¼ˆä¸åŒ…å«MTDï¼‰
            const displayedNumerator = ptDb + gt + gr + lambdaDb + sigmaDb + pulseWidthDb + pcGain + ciGain + nciGain;
            document.getElementById('numeratorTotal').textContent = `${displayedNumerator.toFixed(1)} dB`;
            
            // æ›´æ–°åˆ†æ¯éƒ¨åˆ†
            document.getElementById('kCalc').textContent = `1.38Ã—10â»Â²Â³ J/K (${kDb.toFixed(1)} dB)`;
            document.getElementById('tCalc').textContent = `290 K (${tDb.toFixed(1)} dB)`;
            document.getElementById('fCalc').textContent = `${noiseFigure.toFixed(1)} dB`;
            document.getElementById('lCalc').textContent = `${systemLoss.toFixed(1)} dB`;
            document.getElementById('snrCalc').textContent = `${snr.toFixed(1)} dB`;
            document.getElementById('geometryCalc').textContent = `${Math.pow(4 * Math.PI, 3).toFixed(1)} (${zfDb.toFixed(1)} dB)`;
            document.getElementById('cfarCalc').textContent = `${cfarLoss.toFixed(1)} dB`;
            document.getElementById('denominatorTotal').textContent = `${denominator.toFixed(1)} dB`;
            
            // é‡æ–°è®¡ç®—R^4 (dB)ï¼ŒåŸºäºæ˜¾ç¤ºçš„åˆ†å­åˆ†æ¯
            const displayedR4db = displayedNumerator - denominator;
            const displayedR4 = Math.pow(10, displayedR4db / 10);
            const displayedMaxRange = Math.pow(displayedR4, 1/4) / 1000;
            
            // æ›´æ–°æœ€ç»ˆè®¡ç®—
            document.getElementById('r4dbCalc').textContent = `${displayedR4db.toFixed(1)} dB`;
            document.getElementById('r4linearCalc').textContent = `${displayedR4.toExponential(3)}`;
            document.getElementById('finalRangeCalc').textContent = `${displayedMaxRange.toFixed(2)} km`;
            
            // è¿”å›ä¿®æ­£åçš„æ¢æµ‹è·ç¦»
            return displayedMaxRange;
        }
        
        // é‡ç½®å‚æ•°
        function resetParameters() {
            // åŸºæœ¬å‚æ•°
            elements.pt.value = 480;
            elements.gt.value = 25.6;
            elements.gr.value = 34;
            elements.sigma.value = 0.01;
            elements.snr.value = 12.8;
            elements.freq.value = 10;
            elements.noiseFigure.value = 4;
            elements.systemLoss.value = 8.24;
            
            // ä¿¡å·å¤„ç†å‚æ•°ï¼ˆè„‰å†²å‹ç¼©æ¯”æ˜¯è‡ªåŠ¨è®¡ç®—çš„ï¼Œä¸éœ€è¦é‡ç½®ï¼‰
            elements.coherentIntegration.value = 192;
            elements.nonCoherentIntegration.value = 0;
            elements.cfarType.value = 'ca';
            elements.cfarLoss.value = 0;
            
            // æ³¢å½¢å‚æ•°
            elements.waveformType.value = 'lfm';
            elements.pulseWidth.value = 20;
            elements.bandwidth.value = 0.1;
            elements.prf.value = 10000;
            
            // å·¥ä½œæ¨¡å¼å‚æ•°
            elements.scanMode.value = 'circular';
            elements.dwellTime.value = 100;
            elements.beamWidth.value = 2;
            elements.scanRate.value = 60;
            
            // æ›´æ–°æ‰€æœ‰å‚æ•°æ˜¾ç¤ºå€¼
            updateDisplayValues();
            
            // é‡æ–°è®¡ç®—
            updateCalculation();
        }

        // ç»˜åˆ¶å›¾è¡¨
        function drawChart() {
            const canvas = document.getElementById('chartCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = 'rgba(255,255,255,0.2)';
            ctx.lineWidth = 1;
            
            for (let i = 0; i <= 12; i++) {
                const x = (canvas.width / 12) * i;
                ctx.beginPath();
                ctx.moveTo(x, 0);
                ctx.lineTo(x, canvas.height);
                ctx.stroke();
            }
            
            for (let i = 0; i <= 6; i++) {
                const y = (canvas.height / 6) * i;
                ctx.beginPath();
                ctx.moveTo(0, y);
                ctx.lineTo(canvas.width, y);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶æ ‡é¢˜
            ctx.fillStyle = 'white';
            ctx.font = '16px Microsoft YaHei';
            ctx.textAlign = 'center';
            ctx.fillText('é«˜çº§é›·è¾¾æ€§èƒ½åˆ†æ', canvas.width / 2, 25);
        }

        // æ˜¾ç¤ºé«˜çº§åˆ†æ








        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', init);
    </script>
</body>
</html>